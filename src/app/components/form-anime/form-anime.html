<div class="form-container">
  <div class="form-card">
    <h1>üå∏ A√±adir Nuevo Anime</h1>
    
    <form [formGroup]="animeForm" (ngSubmit)="onSubmit()">
      
      <div class="form-group">
        <label>T√≠tulo *</label>
        <input type="text" formControlName="title" placeholder="Ej: Kimetsu no Yaiba">
        @if (animeForm.get('title')?.invalid && animeForm.get('title')?.touched) {
          <span class="error">El t√≠tulo es requerido (m√≠nimo 2 caracteres)</span>
        }
      </div>

      <div class="form-group">
        <label>Sinopsis *</label>
        <textarea formControlName="synopsis" rows="4" placeholder="Cu√©ntanos de qu√© trata..."></textarea>
        @if (animeForm.get('synopsis')?.invalid && animeForm.get('synopsis')?.touched) {
          <span class="error">La sinopsis es requerida (m√≠nimo 10 caracteres)</span>
        }
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>G√©nero *</label>
          <input type="text" formControlName="genre" placeholder="Ej: Shonen, Romance">
          @if (animeForm.get('genre')?.invalid && animeForm.get('genre')?.touched) {
            <span class="error">El g√©nero es requerido</span>
          }
        </div>

        <div class="form-group">
          <label>A√±o *</label>
          <input type="number" formControlName="year" placeholder="2024">
          @if (animeForm.get('year')?.invalid && animeForm.get('year')?.touched) {
            <span class="error">A√±o entre 1960 y 2030</span>
          }
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Episodios *</label>
          <input type="number" formControlName="episodes" placeholder="12">
          @if (animeForm.get('episodes')?.invalid && animeForm.get('episodes')?.touched) {
            <span class="error">Debe ser mayor a 0</span>
          }
        </div>

        <div class="form-group">
          <label>Puntuaci√≥n * (0-10)</label>
          <input type="number" step="0.1" formControlName="score" placeholder="8.5">
          @if (animeForm.get('score')?.invalid && animeForm.get('score')?.touched) {
            <span class="error">Entre 0 y 10</span>
          }
        </div>
      </div>

      <div class="form-group">
        <label>Estado *</label>
        <select formControlName="status">
          @for (status of statusOptions; track status) {
            <option [value]="status">{{ status }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label>URL de Imagen *</label>
        <input type="url" formControlName="imageUrl" placeholder="https://...">
        @if (animeForm.get('imageUrl')?.invalid && animeForm.get('imageUrl')?.touched) {
          <span class="error">URL v√°lida requerida</span>
        }
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="cancel()">Cancelar</button>
        @if(id== null){
          <button type="submit" class="btn-submit" [disabled]="animeForm.invalid">
            A√±adir
          </button>
        }@else {
          <button type="submit" class="btn-submit" [disabled]="animeForm.invalid">
            Actualizar
          </button>
        }
        
      </div>

    </form>
  </div>
</div>